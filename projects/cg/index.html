<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Custom C++ Ray Tracer | Alireza Parchami </title> <meta name="author" content="Alireza Parchami"> <meta name="description" content="The " lonely snowman is the result of our custom ray-tracing renderer> <meta name="keywords" content="Alireza Parchami, Alireza Computer Graphics, rendering, parchami, visual computing, AI, Generative AI, computer graphics"> <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https:; style-src 'self' 'unsafe-inline' https:; img-src 'self' data: https:; font-src 'self' data: https:; media-src 'self' https:; frame-src 'self' https:; connect-src 'self' https:;"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?v=a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?v=f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?v=62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?v=591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="stylesheet" href="/assets/css/main.css?v=d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://alirezaparchami.github.io/projects/cg/"> <script src="/assets/js/theme.js?v=5fea5159b787642c1bbc1f334d60f883"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?v=5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Alireza</span> Parchami </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">Projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">CV </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-half-sun-moon" id="light-toggle-system"></i> <i class="fa-solid fa-moon" id="light-toggle-dark"></i> <i class="fa-solid fa-sun" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Custom C++ Ray Tracer</h1> <p class="post-description">The "Lonely Snowman" is the result of our Custom Ray-Tracing Renderer</p> </header> <article> <p><strong>TL;DR:</strong> As part of my Computer Graphics coursework, I co-developed a custom multithreaded CPU ray tracing engine in <strong>C++</strong> to render a complex, stylized 3D scene. Extending a baseline framework, my teammate and I engineered core computer graphics and ray-tracing algorithms for spatial acceleration, light transport, and physically based rendering.</p> <p>Our final render, titled <strong>“The Lonely Snowman,”</strong> tells the story of the last snow globe left on a Christmas market shelf.</p> <div class="row justify-content-center"> <div class="col-sm-10 mt-3 mt-md-0 text-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/2022_ComputerGraphics-FinalProject/image-480.webp 480w,/assets/img/projects/2022_ComputerGraphics-FinalProject/image-800.webp 800w,/assets/img/projects/2022_ComputerGraphics-FinalProject/image-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/2022_ComputerGraphics-FinalProject/image.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="Final Render" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption mt-2" style="font-size: 0.85rem;">Final Rendered Image from Our Custom Ray-Tracer</div> </div> </div> <hr style="margin: 2rem 0; border: none; border-top: 1px solid rgba(0, 0, 0, 0.2);"> <h3 id="️-core-engineering--features">⚙️ Core Engineering &amp; Features</h3> <p>To achieve a photorealistic and cinematic result, we engineered custom logic to solve specific rendering challenges:</p> <h4 id="1-transmissive-light-transport-magic-glass">1. Transmissive Light Transport (“Magic Glass”)</h4> <p>Rendering the glass snow globe presented a complex challenge regarding shadow rays and transmissive materials. Standard glass primitives block shadow rays, creating unrealistic dark voids.</p> <p>We modified the <code class="language-plaintext highlighter-rouge">recraytrace</code> integrator so external light passes through the globe, while preventing internal point lights from casting false, enlarged shadows outside.</p> <div class="row justify-content-center"> <div class="col-sm-4 mt-3 mt-md-0 text-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/2022_ComputerGraphics-FinalProject/insideShadows-480.webp 480w,/assets/img/projects/2022_ComputerGraphics-FinalProject/insideShadows-800.webp 800w,/assets/img/projects/2022_ComputerGraphics-FinalProject/insideShadows-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/2022_ComputerGraphics-FinalProject/insideShadows.png" class="img-fluid rounded z-depth-1 eq-height-img" width="100%" height="auto" title="Shadows from Inside" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption mt-2" style="font-size: 0.85rem;">Shadows from Inside</div> </div> <div class="col-sm-4 mt-3 mt-md-0 text-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/2022_ComputerGraphics-FinalProject/outsideShadows-480.webp 480w,/assets/img/projects/2022_ComputerGraphics-FinalProject/outsideShadows-800.webp 800w,/assets/img/projects/2022_ComputerGraphics-FinalProject/outsideShadows-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/2022_ComputerGraphics-FinalProject/outsideShadows.png" class="img-fluid rounded z-depth-1 eq-height-img" width="100%" height="auto" title="No Outside Shadows" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption mt-2" style="font-size: 0.85rem;">No Outside Shadows</div> </div> <div class="col-sm-4 mt-3 mt-md-0 text-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/2022_ComputerGraphics-FinalProject/illumination-480.webp 480w,/assets/img/projects/2022_ComputerGraphics-FinalProject/illumination-800.webp 800w,/assets/img/projects/2022_ComputerGraphics-FinalProject/illumination-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/2022_ComputerGraphics-FinalProject/illumination.png" class="img-fluid rounded z-depth-1 eq-height-img" width="100%" height="auto" title="Illumination from Outside" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption mt-2" style="font-size: 0.85rem;">Illumination from Outside</div> </div> </div> <h4 id="2-procedural-volumetrics-double-sided-primitives">2. Procedural Volumetrics (Double-Sided Primitives)</h4> <p>The confetti inside the globe was created by randomly sampling points within the sphere. However, our standard <code class="language-plaintext highlighter-rouge">Disc</code> primitive was one-sided, meaning rays hitting the back face returned black. We engineered custom double-sided normal calculations so rays hitting the “back” of the confetti still evaluate color correctly.</p> <div class="row justify-content-center"> <div class="col-sm-6 mt-3 mt-md-0 text-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/2022_ComputerGraphics-FinalProject/discs-480.webp 480w,/assets/img/projects/2022_ComputerGraphics-FinalProject/discs-800.webp 800w,/assets/img/projects/2022_ComputerGraphics-FinalProject/discs-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/2022_ComputerGraphics-FinalProject/discs.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="discs" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption mt-2" style="font-size: 0.85rem;">Custom Double-Sided Discs</div> </div> </div> <h4 id="3-physically-based-camera-depth-of-field">3. Physically Based Camera (Depth of Field)</h4> <p>To give the render a cinematic feel and direct the viewer’s eye to the snowman, we simulated a physical lens aperture and focal plane. This added natural Depth of Field, blurring the background lighting and shelves into realistic bokeh.</p> <div class="row justify-content-center"> <div class="col-sm-8 mt-3 mt-md-0 text-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/2022_ComputerGraphics-FinalProject/dof-480.webp 480w,/assets/img/projects/2022_ComputerGraphics-FinalProject/dof-800.webp 800w,/assets/img/projects/2022_ComputerGraphics-FinalProject/dof-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/2022_ComputerGraphics-FinalProject/dof.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" title="DoF" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <h4 id="4-surface-normal-perturbation-bump-mapping">4. Surface Normal Perturbation (Bump Mapping)</h4> <p>To break up the flat CGI look, we implemented bump mapping. We applied noise-based and wood-grain bump maps to the walls and shelves, calculating surface normal modifications during the shading phase.</p> <div class="row justify-content-center"> <div class="col-sm-3 mt-3 mt-md-0 text-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/2022_ComputerGraphics-FinalProject/1_no_bmp-480.webp 480w,/assets/img/projects/2022_ComputerGraphics-FinalProject/1_no_bmp-800.webp 800w,/assets/img/projects/2022_ComputerGraphics-FinalProject/1_no_bmp-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/2022_ComputerGraphics-FinalProject/1_no_bmp.png" class="img-fluid rounded z-depth-1 eq-height-img" width="100%" height="auto" title="Without Bump" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-3 mt-3 mt-md-0 text-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/2022_ComputerGraphics-FinalProject/1_bmp-480.webp 480w,/assets/img/projects/2022_ComputerGraphics-FinalProject/1_bmp-800.webp 800w,/assets/img/projects/2022_ComputerGraphics-FinalProject/1_bmp-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/2022_ComputerGraphics-FinalProject/1_bmp.png" class="img-fluid rounded z-depth-1 eq-height-img" width="100%" height="auto" title="With Bump" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-3 mt-3 mt-md-0 text-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/2022_ComputerGraphics-FinalProject/2_no_bmp-480.webp 480w,/assets/img/projects/2022_ComputerGraphics-FinalProject/2_no_bmp-800.webp 800w,/assets/img/projects/2022_ComputerGraphics-FinalProject/2_no_bmp-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/2022_ComputerGraphics-FinalProject/2_no_bmp.png" class="img-fluid rounded z-depth-1 eq-height-img" width="100%" height="auto" title="Without Bump" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm-3 mt-3 mt-md-0 text-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/2022_ComputerGraphics-FinalProject/2_bmp-480.webp 480w,/assets/img/projects/2022_ComputerGraphics-FinalProject/2_bmp-800.webp 800w,/assets/img/projects/2022_ComputerGraphics-FinalProject/2_bmp-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/2022_ComputerGraphics-FinalProject/2_bmp.png" class="img-fluid rounded z-depth-1 eq-height-img" width="100%" height="auto" title="With Bump" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption mt-2 text-center" style="font-size: 0.85rem;">Comparisons of flat shading (left) vs. procedural bump mapping (right).</div> <h4 id="5-performance--optimization">5. Performance &amp; Optimization</h4> <ul> <li> <strong>Bounding Volume Hierarchy (BVH):</strong> Implemented spatial acceleration to optimize ray-primitive intersection tests for the high-polygon imported snowman.</li> <li> <strong>Mesh Instancing:</strong> Expanded the engine’s loading pipeline to support instancing, drastically reducing the memory footprint of duplicated 3D assets.</li> </ul> <div class="row justify-content-center"> <div class="col-sm-6 mt-3 mt-md-0 text-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/2022_ComputerGraphics-FinalProject/instancing-480.webp 480w,/assets/img/projects/2022_ComputerGraphics-FinalProject/instancing-800.webp 800w,/assets/img/projects/2022_ComputerGraphics-FinalProject/instancing-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/2022_ComputerGraphics-FinalProject/instancing.png" class="img-fluid rounded z-depth-1 eq-height-img" width="100%" height="auto" title="Instancing" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption mt-2" style="font-size: 0.85rem;">Instancing Objects</div> </div> <div class="col-sm-6 mt-3 mt-md-0 text-center"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/projects/2022_ComputerGraphics-FinalProject/bvh-480.webp 480w,/assets/img/projects/2022_ComputerGraphics-FinalProject/bvh-800.webp 800w,/assets/img/projects/2022_ComputerGraphics-FinalProject/bvh-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/projects/2022_ComputerGraphics-FinalProject/bvh.png" class="img-fluid rounded z-depth-1 eq-height-img" width="100%" height="auto" title="BVH" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <div class="caption mt-2" style="font-size: 0.85rem;">BVH Data Structure</div> </div> </div> <hr style="margin: 2rem 0; border: none; border-top: 1px solid rgba(0, 0, 0, 0.2);"> <p>This project was a fantastic deep dive into rendering equations, spatial data structures, and the intersection of software engineering and digital art. It was completed as part of the Computer Graphics course offered by the <a href="https://graphics.cg.uni-saarland.de/courses/cg1-2021/index.html" rel="external nofollow noopener" target="_blank">CG-Group of Saarland University</a>.</p> </article> </div> </div> <footer class="sticky-bottom mt-5" role="contentinfo"> <div class="container"> © Copyright 2026 Alireza Parchami. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?v=a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?v=85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?v=2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?v=c15de51d4bb57887caa2c21988d97279"></script> <script defer src="/assets/js/copy_code.js?v=c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?v=d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?v=a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?v=2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?v=f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> </body> </html>